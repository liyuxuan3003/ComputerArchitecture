\ProvidesPackage{xCode}

\RequirePackage{listings}
\renewcommand{\lstlistlistingname}{代码}
\renewcommand{\lstlistingname}{代码}

\xrefcreate{code}{代码}

\lstset%
{%
    basicstyle=\ttfamily,%
    keywordstyle=\bfseries\color{blue},%
    ndkeywordstyle=\bfseries\color{teal},%
    commentstyle=\color{red},%
    stringstyle=\color{magenta},%
    flexiblecolumns,%            
    numbers=left,%
    showspaces=false,%
    numberstyle=\tiny\ttfamily,%
    showstringspaces=false,%
    captionpos=t,%
    frame=lrtb,%
    breaklines=true,% 
    columns=fixed,%
    basewidth=0.5em,%
}%

\lstdefinestyle{C}%
{%
    language=C,%
    identifierstyle=\color{black!50!green}%
}%

\lstdefinestyle{Verilog}%
{%
    language=Verilog,%
    identifierstyle=\color{black!50!green}%
}%

\lstdefinestyle{ASM}%
{%
    % language=[x86masm]Assembler,%
    identifierstyle=\color{black!50!green},%
    morekeywords={lui,li,auipc,j,jr,jal,jalr,ret,beq,bne,blt,bgt,ble,bge,bltu,bgtu,bleu,bgeu,lb,lh,lw,lbu,lhu,sb,sh,sw,addi,nop,mv,slti,sltiu,xori,ori,andi,slli,srli,srai,add,sub,neg,sll,srl,sra,xor,or,and,not,slt,sltu},
    morecomment=[l][commentstyle]{\#}%
}%

\NewDocumentEnvironment{Code}{O{}gb}%
{%
    \IfNoValueTF{#2}
    {\lstinputlisting[caption={#1},label={code:#1}]{#3}}
    {\lstinputlisting[style=#2,caption={#1},label={code:#1}]{#3}}
}{}%

\def\codex{\ \lstinline}
\def\code{\lstinline}